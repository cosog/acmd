# 第六章 插件

- [第六章 插件](Chapter6.md#第六章-插件)
	- [6.1 转直角坐标](Chapter6.md#61-转直角坐标)
      - [6.1.1 输入文本](Chapter6.md#611-输入文本)
      	- [6.1.1.1 输入参数说明](Chapter6.md#6111-输入参数说明)
      	- [6.1.1.2 输入实例](Chapter6.md#6112-输入实例)
	  - [6.1.2 输出文本](Chapter6.md#612-输出文本)
      	- [6.1.2.1 输出参数说明](Chapter6.md#6121-输出参数说明)
      	- [6.1.2.2 输出实例](Chapter6.md#6122-输出实例)
	- [6.2 采集处理](Chapter6.md#62-采集处理)
      - [6.2.1 输入文本](Chapter6.md#621-输入文本)
      	- [6.2.1.1 输入参数说明](Chapter6.md#6211-输入参数说明)
      	- [6.2.1.2 输入实例](Chapter6.md#6212-输入实例)
	  - [6.2.2 输出文本](Chapter6.md#622-输出文本)
      	- [6.2.2.1 输出参数说明](Chapter6.md#6221-输出参数说明)
      	- [6.2.2.2 输出实例](Chapter6.md#6222-输出实例)
		

## 6.1 转直角坐标

### 6.1.1 输入文本
#### 6.1.1.1 输入参数说明

表6-1 输入参数说明表

| **代码**                    | **名称** | **单位** | **类型** | **必填** | **备注** |
|-----------------------------|----------|----------|----------|----------|----------|
| **WellboreTrajectory**      | **井身轨迹**|          |          |          |          |
| MeasuringDepth              | 测量深度 | m        | []float64  | *       |          |
| DeviationAngle              | 井斜角   | 度       | []float64  | *       |          |
| AzimuthAngle                | 方位角   | 度       | []float64  | *       |          |

#### 6.1.1.2 输入实例

```
{
    "AKString":"",
    "WellName":"2xyz",
    "WellboreTrajectory":{
        "MeasuringDepth":[
            115,
            120,
            125,
            130,
			...
            1635,
            1640,
            1645,
            1650
        ],
        "DeviationAngle":[
            0.2,
            0.17,
            0.2,
            0.2,
			...
            0.64,
            0.6,
            0.53,
            0.51
        ],
        "AzimuthAngle":[
            288.39,
            288.39,
            288.39,
            288.39,
			...
            74.85,
            75.31,
            80.74,
            91.04
        ]
    }
}
```

### 6.1.2 输出文本

#### 6.1.2.1 输出参数说明

表6-2 输出参数说明表

| **代码**                         | **名称**       | **单位** | **类型** | **备注**                                   |
|----------------------------------|----------------|----------|----------|----------------------------------------|
| WellName                         | 井名           |          | string   |                                        |
| **CalculationStatus**            | **计算状态**  |          |          |                                          |
| ResultStatus                     | 计算结果状态   |          | int      |  详见表底注释[1]                            |
| **Verification**                 | **数据校验**  |          |          |                                            |
| ErrorCounter                     | 错误参数计数器 |          | int      | 错误参数个数                                  |
| ErrorString                      | 错误参数字符串 |          | string   | 数据错误，计算不成功                          |
| WarningCounter                   | 报警计数器     |          | int      | 报警参数个数                                  |
| WarningString                    | 报警字符串     |          | string   | 报警参数（取默认值，计算正常进行）               |
| **WellboreTrajectory**           | **井身轨迹**   |          |          |                                            |
| CNT                              | 点数           |          | int      |                                            |
| MeasuringDepth                   | 测量深度       | m        | []float64  |                                            |
| VerticalDepth                    | 垂直深度       | m        | []float64  |                                            |
| DeviationAngle                   | 井斜角         | 度       | []float64  |                                            |
| AzimuthAngle                     | 方位角         | 度       | []float64  |                                            |
| X                                | 直角坐标X      | m        | []float64  |                                            |
| Y                                | 直角坐标Y      | m        | []float64  |                                            |
| Z                                | 直角坐标Z      | m        | []float64  |                                            |
| ArrayStr                         | 数组字符串     |          | []string   |                                            |

**[1]** *1:计算成功，-44:请求数据读取失败，-55:请求数据json解码失败， -66:井数许可超限，-77:计算异常， -88:响应数据json编码失败， -99:数据校验错误* 

#### 6.1.2.2 输出实例

```
{
    "WellName": "2xyz",
    "CalculationStatus": {
        "ResultStatus": 1
    },
    "Verification": {
        "ErrorCounter": 0,
        "ErrorString": "",
        "WarningCounter": 0,
        "WarningString": ""
    },
    "WellboreTrajectory": {
        "CNT": 308,
        "MeasuringDepth": [
            115,
            120,
            125,
            130,
			...
            1635,
            1640,
            1645,
            1650
        ],
        "VerticalDepth": [
            115,
            120,
            125,
            130,
			...
            1596.31,
            1601.31,
            1606.31,
            1611.31
        ],
        "DeviationAngle": [
            0.2,
            0.17,
            0.2,
            0.2,
			...
            0.64,
            0.6,
            0.53,
            0.51
        ],
        "AzimuthAngle": [
            288.39,
            288.39,
            288.39,
            288.39,
			...
            74.85,
            75.31,
            80.74,
            91.04
        ],
        "X": [
            -0.381,
            -0.395,
            -0.412,
            -0.428,
			...
            66.24,
            66.29,
            66.34,
            66.38
        ],
        "Y": [
            0.127,
            0.131,
            0.137,
            0.142,
			...
            264.99,
            265.01,
            265.01,
            265.01
        ],
        "Z": [
            115,
            120,
            125,
            130,
			...
            1596.31,
            1601.31,
            1606.31,
            1611.31
        ],
        "ArrayStr": "
        [
            -0.380924579344047,
            0.1266429051644481,
            -114.9992993806459
        ],
        [
            -0.395002234774901,
            0.13132318907980337,
            -119.99927737205346
        ],
		...
        [
            66.33980781815804,
            265.01450038745384,
            -1606.3112885584012
        ],
        [
            66.38430579490438,
            265.01369259708366,
            -1611.3110904822317
        ]
        "
    }
}
```
## 6.2 采集处理
### 6.2.1 输入文本

#### 6.2.1.1 输入参数说明

*表6-3 输入参数说明表*

| 代码           | 名称                | 单位 | 类型    | 必填 | 备注                |
|----------------|---------------------|------|---------|------|---------------------|
| WellName       | 井名                |      | string  | *    |                     |
| NameplateStroke| 铭牌冲程            | m    | float64 | *    | 与前臂长二选一填写  |
| ForearmLength  | 前臂长              | m    | float64 |      | 与铭牌冲程二选一填写|
| **FEADiagram**  | **采集数据**   |      |         |      |                     |
| T              | 采集时间戳           | ns   | []int64  | *    | 时间戳              |
| F              | 载荷                | kN   | []float64 | *    |                     |
| A              | 角度                | °    | []float64 | *    |                     |
| Watt           | 有功功率             | kW    | []float64 | *    |                     |
| I              | 电流                | A     | []float64 | *    |                     |

#### 6.2.1.2 输入实例

```
{
    "WellName":"J01-001",
    "NameplateStroke":3.45,
    "FEADiagram":{
        "T":[
            1590724863024834600,
            1590724863084834620,
            1590724863144834640,
            1590724863204834660,
			...
            1590724910784858520,
            1590724910844858540,
            1590724910904858560,
            1590724910964858580
        ],
        "F":[
            19.20,
            18.96,
            19.5,
            20.52,
			...
            18.48,
            19,
            19.34,
            19.39
        ],
        "A":[
            -14.81,
            -14.81,
            -14.81,
            -14.81,
			...
            -14.61,
            -14.81,
            -14.81,
            -14.81
        ],
        "Watt":[
            2.35,
            2.31,
            2.31,
            2.24,
			...
            2.43,
            2.38,
            2.35,
            2.35
        ],
        "I":[
            6.67,
            6.72,
            6.72,
            6.72,
			...
            6.75,
            6.75,
            6.74,
            6.74
        ]
    }
}
```
### 6.2.2 输出文本

#### 6.2.2.1 输出参数说明

*表6-4 输出参数说明表*
| 代码                  | 名称             | 单位  | 类型    | 备注                              |
|-----------------------|------------------|-------|---------|-----------------------------------|
| WellName              | 井名             |       | string  |                                   |
| **CalculationStatus** | **计算状态**     |       |         |                                   |
| ResultStatus          | 计算结果状态     |       | int     | 详见表底注释[1]                   |
| **Verification**      | **数据校验**     |       |         |                                   |
| ErrorCounter          | 错误参数计数器   |       | int     | 错误参数个数                      |
| ErrorString           | 错误参数字符串   |       | string  | 数据错误，计算不成功              |
| WarningCounter        | 报警计数器       |       | int     | 报警参数个数                      |
| WarningString         | 报警字符串       |       | string  | 报警参数（取默认值，计算正常进行）|
| NameplateStroke       | 铭牌冲程         | m     | float64 |                                   |
| ForearmLength         | 前臂长           | m     | float64 |                                   |
| **FESDiagram**         |  **功图数据**    |       |         |                                   |
| AcquisitionTime       | 采集时间         |       | string  |                                   |
| Stroke                | 功图冲程         | m     | float64 |                                   |
| SPM                   | 功图冲次         | 1/min | float64 |                                   |
| CNT                   | 点数             |       | int     |                                   |
| F                     | 载荷             | kN    | []float64 |                                   |
| S                     | 位移             | m     | []float64 |                                   |
| Watt                  | 有功功率          | kW    | []float64 |                                   |
| I                     | 电流             | A     | []float64 |                                   |

**[1]** *1:计算成功，-44:请求数据读取失败，-55:请求数据json解码失败， -66:井数许可超限，-77:计算异常， -88:响应数据json编码失败， -99:数据校验错误* 

#### 6.2.2.2 输出实例

```
{
    "WellName": "J01-001",
    "CalculationStatus": {
        "ResultStatus": 1
    },
    "Verification": {
        "ErrorCounter": 0,
        "ErrorString": "",
        "WarningCounter": 0,
        "WarningString": ""
    },
    "NameplateStroke": 3.45,
    "ForearmLength": 3.33,
    "FESDiagram": {
        "AcquisitionTime": "2020-05-29 12:01:07",
        "Stroke": 3.45,
        "SPM": 6.29,
        "CNT": 200,
        "F": [
            19,
            19.34,
            19.39,
            19.2,
			...
            19.02,
            18.52,
            18.3,
            18.48
        ],
        "S": [
            0,
            0,
            0,
            0,
			...
            0.02,
            0.02,
            0.01,
            0.01
        ],
        "Watt": [
            2.38,
            2.35,
            2.35,
            2.35,
			...
            2.29,
            2.43,
            2.43,
            2.43
        ],
        "I": [
            6.75,
            6.74,
            6.74,
            6.67,
			...
            6.67,
            6.75,
            6.75,
            6.75
        ]
    }
}
```

----[第五章 全井汇总](.././Chapter5/Chapter5.md)----[返回章节目录](.././README.md)----[第七章 转速计产](.././Chapter7/Chapter7.md)----